(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(7),o=a.n(i),s=(a(87),a(37)),l=a.n(s),c=a(52),d=a(44),u=a(58),m=a(30),p=a(20),E=a(34),w=a(31),v=a(33),h=a(42),y=a.n(h),b=new h.HttpProvider(window.PROVIDER_URL),O=new y.a(b),f=h.IconBuilder.CallBuilder,g=h.IconBuilder.CallTransactionBuilder,S={iconService:O,callBuild:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.from,a=e.methodName,n=e.to,r=e.params,i=void 0===r?{}:r;return(new f).from(t).to(n).method(a).params(i).build()},sendTxBuild:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.from,a=e.to,n=e.methodName,r=e.params,i=void 0===r?{}:r,o=e.networkId,s=void 0===o?window.NID:o,l=e.stepLimit,c=void 0===l?"0x493e0":l,d=e.value,u=void 0===d?"0x0":d;return{jsonrpc:"2.0",method:"icx_sendTransaction",params:(new g).nid(s).from(t).to(a).stepLimit(c).value(u).timestamp("0x".concat((1e3*(new Date).getTime()).toString(16))).method(n).params(i).version("0x3").build(),id:1}}},D=a(45),x={getAddress:function(){return new Promise(function(e){window.addEventListener("ICONEX_RELAY_RESPONSE",function t(a){var n=a.detail,r=n.type,i=n.payload;"RESPONSE_ADDRESS"===r&&e(i),window.removeEventListener("ICONEX_RELAY_RESPONSE",t)}),window.dispatchEvent(new CustomEvent("ICONEX_RELAY_REQUEST",{detail:{type:"REQUEST_ADDRESS"}}))})},sendTransaction:function(e){return new Promise(function(t){window.addEventListener("ICONEX_RELAY_RESPONSE",function e(a){var n=a.detail,r=n.type,i=n.payload;"RESPONSE_JSON-RPC"===r&&t(i.result),window.removeEventListener("ICONEX_RELAY_RESPONSE",e)}),window.dispatchEvent(new CustomEvent("ICONEX_RELAY_REQUEST",{detail:{type:"REQUEST_JSON-RPC",payload:e}}))})}},j=a(150),C={MODE:{LOG_OUT:"LOG_OUT",LOG_IN:"LOG_IN"},SERVICE:[{value:"00",label:"Naver"},{value:"01",label:"Google"},{value:"02",label:"Facebook"},{value:"03",label:"Amazon"},{value:"04",label:"Instagram"},{value:"05",label:"Daum"},{value:"06",label:"Yahoo"},{value:"07",label:"Twitter"},{value:"08",label:"Nate"},{value:"09",label:"Baidu"},{value:"10",label:"Steam"},{value:"11",label:"Origin"}]};var k=function(e){var t=e.type,a=e.buttonClick,n="",i={};switch(t){case"LOG_IN":n="Connect to ICONex",i={background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",border:0,borderRadius:30,color:"white",height:48,padding:"8px 145px",textTransform:"none",width:440};break;case"SENDTX":n="Save Data",i={background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",border:0,borderRadius:30,color:"white",height:48,padding:"8px 65px",textTransform:"none",width:292}}return r.a.createElement(j.a,{onClick:a,style:i},n)},N=a(155),I=a(148),R=Object(I.a)(N.a)({marginLeft:8,marginRight:8,width:135}),L=function(e){function t(){return Object(m.a)(this,t),Object(E.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.inputData,a=e.setInputData,n=e.handleEncrypt;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",margin:"-8px 30px 11px"}},r.a.createElement(R,{select:!0,label:"Service",value:t.label,onChange:a("label"),SelectProps:{native:!0,MenuProps:{style:{width:200}}},margin:"normal"},C.SERVICE.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)})),r.a.createElement(R,{label:"ID",value:t.id,onChange:a("id"),margin:"normal"}),r.a.createElement(R,{label:"PW",value:t.pw,onChange:a("pw"),margin:"normal"})),r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",margin:"-20px 30px 11px"}},r.a.createElement(R,{label:"Key",value:t.key,onChange:a("key"),margin:"normal"}),r.a.createElement(j.a,{style:{border:"1px white solid",borderRadius:30,color:"white",height:48,padding:"8px 145px",textTransform:"none",width:240,marginTop:16,marginLeft:6},onClick:n,variant:"outlined"},"Encrypt")))}}]),t}(n.Component),_=a(151),A=a(152),T=a(154),B=a(153),P=a(118);function F(e){for(var t=new ArrayBuffer(2*e.length),a=new Uint16Array(t),n=0,r=e.length;n<r;n++)a[n]=e.charCodeAt(n);return t}var U=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(E.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={key:"",result:""},a.setInputData=function(e){a.setState({key:e.target.value})},a.handleDecrypt=function(){console.log(new Uint8Array(F(a.state.key)).slice(0,16));var e=new Uint8Array(F(a.state.key)).slice(0,16),t=new window.aesjs.ModeOfOperation.ctr(e,new window.aesjs.Counter(5)).decrypt(window.aesjs.utils.hex.toBytes(a.props.encryptedData)),n=window.aesjs.utils.utf8.fromBytes(t);a.setState({result:"ID: ".concat(n.split(" ")[0]," | PW: ").concat(n.split(" ")[1])})},a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.label,a=e.encryptedData,n=this.state,i=n.key,o=n.result;return r.a.createElement(_.a,{style:{width:800,marginBottom:20}},r.a.createElement(A.a,null,r.a.createElement(B.a,null,r.a.createElement(P.a,{gutterBottom:!0,variant:"h5",component:"h2"},C.SERVICE[Number(t)].label),r.a.createElement(P.a,{variant:"body2",color:"textSecondary",component:"p"},a))),r.a.createElement(T.a,{style:{padding:14}},o?r.a.createElement(N.a,{id:"decrypt",label:"Result",value:o,style:{width:680},margin:"none"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{id:"decrypt",label:"Key",value:i,style:{width:680},onChange:this.setInputData,margin:"none"}),r.a.createElement(j.a,{onClick:this.handleDecrypt,size:"small",color:"primary"},"Decrypt"))))}}]),t}(n.Component),K=function(e){function t(){return Object(m.a)(this,t),Object(E.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.myKissList;return r.a.createElement("section",{className:"list fade-in"},e.map(function(e,t){return r.a.createElement(U,{key:t,label:e[0],encryptedData:e[1]})}))}}]),t}(n.Component),G={id:"ID",pw:"PW",label:"00",key:"",encryptedData:""},M=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(E.a)(this,Object(w.a)(t).call(this,e))).setInputData=function(e){return function(t){a.setState({inputData:Object(u.a)({},a.state.inputData,Object(d.a)({},e,t.target.value))})}},a.handleEncrypt=function(){var e=a.state.inputData,t=e.id,n=e.pw,r=e.key,i="".concat(t," ").concat(n),o=window.aesjs.utils.utf8.toBytes(i),s=new Uint8Array(F(r)).slice(0,16),l=new window.aesjs.ModeOfOperation.ctr(s,new window.aesjs.Counter(5)).encrypt(o),c=window.aesjs.utils.hex.fromBytes(l);a.setState({inputData:Object(u.a)({},a.state.inputData,{encryptedData:c})})},a.buttonClick=function(){switch(a.state.mode){case C.MODE.LOG_OUT:a.getAddress();break;case C.MODE.LOG_IN:a.sendTransaction()}},a.getAddress=Object(c.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getAddress();case 2:t=e.sent,a.setState({mode:C.MODE.LOG_IN,myAddress:t},function(){a.getKissList()});case 4:case"end":return e.stop()}},e)})),a.sendTransaction=Object(c.a)(l.a.mark(function e(){var t,n,r,i,o,s,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.sendTxBuild,n=a.state,r=n.inputData,i=n.myAddress,o=r.label,s=r.encryptedData,c=t({from:i,to:window.CONTRACT_ADDRESS,methodName:"setKissInfo",params:{label:o,encrypted_password:s}}),e.next=6,x.sendTransaction(c);case 6:e.sent,a.setState({inputData:G},function(){setTimeout(function(){a.getKissList()},3e3)});case 8:case"end":return e.stop()}},e)})),a.getKissList=Object(c.a)(l.a.mark(function e(){var t,n,r,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.iconService,n=S.callBuild,r=a.state.myAddress,e.next=4,t.call(n({from:r,methodName:"getAllKissInfos",params:{},to:window.CONTRACT_ADDRESS})).execute();case 4:i=e.sent,a.setState({myKissList:Object.entries(JSON.parse(i))});case 6:case"end":return e.stop()}},e)})),a.state={mode:C.MODE.LOG_OUT,myAddress:"",inputData:G,myKissList:[]},a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.mode,a=e.inputData,n=e.myKissList;console.log(n);var i=t===C.MODE.LOG_OUT,o=!!a.encryptedData;return r.a.createElement("div",{className:"App"},r.a.createElement("section",{className:"main"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("p",{className:"logo anton-400"},"KISS"),r.a.createElement("div",{style:{textAlign:"center"}},i?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"desc roboto-slab"},"Key Is Set on blockchain Safely"),r.a.createElement(k,Object.assign({},this.state,{type:"LOG_IN",buttonClick:this.buttonClick}))):r.a.createElement(L,Object.assign({},this.state,{setInputData:this.setInputData,handleEncrypt:this.handleEncrypt})))),o&&r.a.createElement("div",{className:"encrypt"},r.a.createElement(N.a,{disabled:!0,label:"Encrypted string",value:a.encryptedData,style:{width:370,margin:"-4px 30px 0 0"},margin:"none",variant:"outlined"}),r.a.createElement(k,Object.assign({},this.state,{type:"SENDTX",buttonClick:this.buttonClick})))),n.length>0&&r.a.createElement(K,this.state))}}]),t}(n.Component),X=Object(D.withSnackbar)(M);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=a(147),Y=a(43),J=Object(Y.a)({palette:{primary:{main:"#FE4365"},secondary:{main:"#F9F9F9"}}});o.a.render(r.a.createElement(W.a,{theme:J},r.a.createElement(D.SnackbarProvider,{maxSnack:3},r.a.createElement(X,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},82:function(e,t,a){e.exports=a(113)},87:function(e,t,a){}},[[82,1,2]]]);
//# sourceMappingURL=main.8edc6ee3.chunk.js.map